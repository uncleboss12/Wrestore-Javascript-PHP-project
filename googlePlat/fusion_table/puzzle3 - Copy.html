<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/result-light.css">
    <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?sensor=false&amp;libraries=geometry,places&amp;ext=.js"></script>

    <style id="compiled-css" type="text/css">
        html, body, #map-canvas {
            height: 500px;
            width: 500px;
            margin: 0px;
            padding: 0px
        }
    </style>

    <!-- TODO: Missing CoffeeScript 2 -->
    <script type="text/javascript">
        var map;
        var infoWindow;
        var decodedPolygon = [];

        function initialize() {
            var mapOptions = {
                zoom: 3,
                center: new google.maps.LatLng(49.724479, 17.578125),
                mapTypeId: google.maps.MapTypeId.TERRAIN
            };

            map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);

            // downloadUrl("polygon_xml.php", function(data) {
            // var xml = data.responseXML;
            // var markers = xml.documentElement.getElementsByTagName("marker");
            //var bounds = new google.maps.LatLngBounds();

            var markers = ["{zzfIsjmu@kHuczRrg{NxcsO}t{GtczR",
                "a}~cIqcskBu|sEov{OoxNel}AfccMwfzG~q|@nknX}u~GvczR",
                "cljkHmfoQl|J{hrV~syGzhrV"];
            var bounds = new google.maps.LatLngBounds();
            for (var i = 0; i < markers.length; i++) {
                // var encodedPath = markers[i].getAttribute("coords");

                // var encodedPath = "yzocFzynhVq}@n}@o}@nzD";
                var encodedPath = markers[i];
                decodedPolygon = google.maps.geometry.encoding.decodePath(encodedPath);

                for (var j = 0; j < decodedPolygon.length; j++) {
                    bounds.extend(decodedPolygon[j]);
                }
                var bermudaTriangle = new google.maps.Polygon({
                    paths: decodedPolygon,
                    strokeColor: '#FF0000',
                    strokeOpacity: 0.8,
                    strokeWeight: 3,
                    fillColor: '#FF0000',
                    fillOpacity: 0.35
                });

                bermudaTriangle.setMap(map);

                //alert1(decodedPolygon);
                //bounds.extend(decodedPolygon);
            }
            map.fitBounds(bounds);
            // })

            //alert2(decodedPolygon);
            // Construct the polygon.

            // Add a listener for the click event.
//            google.maps.event.addListener(bermudaTriangle, 'click', showArrays);

            infoWindow = new google.maps.InfoWindow();
        }

        /** @this {google.maps.Polygon} */
//        function showArrays(event) {
//            // Since this polygon has only one path, we can call getPath()
//            // to return the MVCArray of LatLngs.
//            var vertices = this.getPath();
//
//            var contentString = '<b>Bermuda Triangle polygon</b><br>' +
//                'Clicked location: <br>' + event.latLng.lat() + ',' + event.latLng.lng() +'<br>';
//
//            // Iterate over the vertices.
//            for (var i = 0; i < vertices.getLength(); i++) {
//                var xy = vertices.getAt(i);
//                contentString += '<br>' + 'Coordinate ' + i + ':<br>' + xy.lat() + ',' + xy.lng();
//            }
//
//            // Replace the info window's content and position.
//            infoWindow.setContent(contentString);
//            infoWindow.setPosition(event.latLng);
//            infoWindow.open(map);
//        }

        function downloadUrl(url, callback) {
            var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest;

            request.onreadystatechange = function () {
                if (request.readyState == 4) {
                    request.onreadystatechange = doNothing;
                    callback(request, request.status);
                }
            };
            request.open('GET', url, true);
            request.send(null);
        }
        function doNothing() {}

        google.maps.event.addDomListener(window, 'load', initialize);
    </script>

</head>
<body>
<div id="map-canvas" style="border: 2px solid #3872ac;"></div>


<script>
    // tell the embed parent frame the height of the content
    if (window.parent && window.parent.parent){
        window.parent.parent.postMessage(["resultsFrame", {
            height: document.body.getBoundingClientRect().height,
            slug: "oomxLg9e"
        }], "*")
    }
</script>
</body>
</html>
